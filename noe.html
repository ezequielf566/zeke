<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Runner da Arca - Vers√£o Ajustada</title>
    <style>
        /* --- ESTILOS GERAIS E CEN√ÅRIO --- */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA); /* C√©u */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: manipulation; /* Melhora resposta ao toque */
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        /* Ch√£o */
        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px; /* Altura do ch√£o fixo */
            background-color: #5D4037;
            border-top: 5px solid #3E2723;
            z-index: 10;
        }

        /* --- AVISO DE ORIENTA√á√ÉO (NOVIDADE) --- */
        #orientation-badge {
            display: none; /* Oculto por padr√£o */
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.85);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            pointer-events: none; /* Permite clicar atrav√©s dele */
            white-space: nowrap;
            animation: fadeIn 0.5s ease;
        }
        
        #orientation-badge span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Mostra o aviso apenas se a altura for maior que a largura (Retrato) */
        @media (orientation: portrait) {
            #orientation-badge {
                display: block;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -10px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }

        /* --- OBJETOS DO JOGO --- */
        
        /* Personagem */
        #player {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: #FF5722; /* Cor provis√≥ria (substituir por sprite se tiver) */
            bottom: 60px; /* Come√ßa acima do ch√£o */
            left: 50px;
            border-radius: 5px;
            z-index: 20;
        }

        /* A Arca (CORRE√á√ÉO DE RESPONSIVIDADE) */
        #ark {
            position: absolute;
            bottom: 65px; /* Levemente acima do ch√£o */
            right: 10%;   /* Fica ao fundo ou na meta */
            z-index: 5;
            opacity: 0.9;
            
            /* L√≥gica Responsiva Importante: */
            width: auto;       /* Largura autom√°tica baseada na altura */
            max-width: 35vw;   /* Nunca ocupa mais que 35% da largura da tela */
            height: auto;      
            max-height: 40vh;  /* Nunca ocupa mais que 40% da altura da tela */
        }
        
        /* Caso n√£o tenha a imagem real, isso √© um placeholder visual da arca */
        .ark-placeholder {
            width: 200px;
            height: 120px;
            background: #795548;
            border-radius: 10px 10px 40px 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }

        /* Obst√°culos */
        .obstacle {
            position: absolute;
            bottom: 60px;
            width: 40px;
            height: 40px;
            background-color: #2E7D32; /* Arbusto/Pedra */
            border-radius: 5px;
            left: 100vw; /* Come√ßa fora da tela */
            z-index: 15;
        }

        /* --- INTERFACE DE PONTUA√á√ÉO --- */
        #score-board {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #333;
            font-size: 20px;
            font-weight: bold;
            background: rgba(255,255,255,0.6);
            padding: 5px 10px;
            border-radius: 8px;
            z-index: 100;
        }

        #game-over {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            z-index: 200;
        }

        button {
            background: #FF5722;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="orientation-badge">
            <span>üì± Melhor experi√™ncia com a tela deitada</span>
        </div>

        <div id="score-board">Pontos: <span id="score">0</span></div>
        
        <div id="player"></div>
        
        <img id="ark" src="arca.png" alt="Arca de No√©" onerror="this.style.display='none'; document.getElementById('ark-place').style.display='flex'">
        <div id="ark-place" class="ark-placeholder" style="display:none; position:absolute; bottom:65px; right:10%;">ARCA</div>

        <div id="ground"></div>

        <div id="game-over">
            <h2>Fim de Jogo!</h2>
            <p>Pontua√ß√£o: <span id="final-score">0</span></p>
            <button onclick="resetGame()">Jogar Novamente</button>
        </div>
    </div>

    <script>
        // --- CONFIGURA√á√ïES E VARI√ÅVEIS ---
        const player = document.getElementById('player');
        const gameContainer = document.getElementById('game-container');
        const scoreElement = document.getElementById('score');
        const gameOverScreen = document.getElementById('game-over');
        const finalScoreElement = document.getElementById('final-score');

        let isGameOver = false;
        let score = 0;
        
        // Vari√°veis de F√≠sica do Pulo
        let playerBottom = 60; // Posi√ß√£o Y inicial (igual √† altura do ground)
        let gravity = 0.9;
        let velocityY = 0;
        let isJumping = false;
        let jumpsLeft = 2; // Controle de quantos pulos restam

        // FOR√áAS DO PULO (Ajuste "Suave" aqui)
        const JUMP_STRENGTH = 14;       // For√ßa do 1¬∫ pulo (Alto)
        const DOUBLE_JUMP_STRENGTH = 9; // For√ßa do 2¬∫ pulo (Suave/Corretivo)

        let obstacleTimerId;
        let gameLoopId;

        // --- CONTROLES ---
        function handleInput(e) {
            if (e.type === 'keydown' && e.code !== 'Space' && e.code !== 'ArrowUp') return;
            if (isGameOver) {
                // Opcional: Reiniciar com espa√ßo se estiver na tela de game over
                return;
            }
            performJump();
        }

        // Suporte a Toque e Teclado
        document.addEventListener('keydown', handleInput);
        document.addEventListener('touchstart', (e) => {
            // Previne zoom duplo toque e comportamento padr√£o
            e.preventDefault(); 
            if (!isGameOver) performJump();
        }, { passive: false });

        // --- L√ìGICA DO PULO ---
        function performJump() {
            // Se est√° no ch√£o, Pulo 1
            if (!isJumping) {
                isJumping = true;
                velocityY = JUMP_STRENGTH;
                jumpsLeft = 1; // Resta 1 pulo
            } 
            // Se est√° no ar e tem pulos restantes, Pulo 2 (Suave)
            else if (jumpsLeft > 0) {
                velocityY = DOUBLE_JUMP_STRENGTH; // Usa a for√ßa mais fraca
                jumpsLeft = 0; // Acabaram os pulos
            }
        }

        // --- LOOP DO JOGO (F√çSICA) ---
        function startGameLoop() {
            gameLoopId = setInterval(() => {
                if (isGameOver) return;

                // Aplicar gravidade e velocidade
                velocityY -= gravity;
                playerBottom += velocityY;

                // Colis√£o com o ch√£o
                if (playerBottom <= 60) {
                    playerBottom = 60;
                    velocityY = 0;
                    isJumping = false;
                    jumpsLeft = 2; // Reseta os pulos ao tocar o ch√£o
                }

                // Aplica a posi√ß√£o visualmente
                player.style.bottom = playerBottom + 'px';

                // Pontua√ß√£o progressiva
                score++;
                scoreElement.innerText = Math.floor(score / 10);

            }, 20); // 50fps aprox
        }

        // --- GERADOR DE OBST√ÅCULOS ---
        function generateObstacles() {
            if (isGameOver) return;

            // Cria√ß√£o aleat√≥ria (entre 1 e 3 segundos)
            let randomTime = Math.random() * 2000 + 1000;
            
            obstacleTimerId = setTimeout(() => {
                if (isGameOver) return;

                const obstacle = document.createElement('div');
                obstacle.classList.add('obstacle');
                gameContainer.appendChild(obstacle);
                
                let obstacleLeft = gameContainer.clientWidth; // Come√ßa na direita total
                obstacle.style.left = obstacleLeft + 'px';

                // Movimento do Obst√°culo
                let timerId = setInterval(() => {
                    if (isGameOver) {
                        clearInterval(timerId);
                        return;
                    }

                    // Velocidade do jogo
                    obstacleLeft -= 5; 
                    obstacle.style.left = obstacleLeft + 'px';

                    // Detectar Colis√£o
                    // O Player est√° a 50px da esquerda e tem 50px de largura
                    // Obst√°culo tem 40px de largura
                    if (obstacleLeft > 50 && obstacleLeft < 100 && playerBottom < 100) {
                        // Colis√£o Simples (ajuste a altura < 100 conforme tamanho do obst√°culo)
                        gameOver();
                        clearInterval(timerId);
                    }

                    // Remover obst√°culo se sair da tela
                    if (obstacleLeft < -60) {
                        clearInterval(timerId);
                        gameContainer.removeChild(obstacle);
                    }

                }, 20);

                // Recurs√£o para o pr√≥ximo obst√°culo
                generateObstacles();

            }, randomTime);
        }

        // --- FIM DE JOGO ---
        function gameOver() {
            isGameOver = true;
            clearInterval(gameLoopId);
            clearTimeout(obstacleTimerId);
            
            // Pausa visualmente todos os obst√°culos
            let obstacles = document.querySelectorAll('.obstacle');
            obstacles.forEach(obs => {
                // Mant√©m a posi√ß√£o atual mas para de mover (j√° feito pelo clearInterval dos timers individuais se fossem globais, mas aqui garantimos parada visual se necess√°rio)
            });

            finalScoreElement.innerText = Math.floor(score / 10);
            gameOverScreen.style.display = 'block';
        }

        function resetGame() {
            // Limpa obst√°culos antigos
            document.querySelectorAll('.obstacle').forEach(e => e.remove());
            
            isGameOver = false;
            score = 0;
            scoreElement.innerText = 0;
            gameOverScreen.style.display = 'none';
            playerBottom = 60;
            player.style.bottom = playerBottom + 'px';
            
            // Reinicia loops
            startGameLoop();
            generateObstacles();
        }

        // Iniciar
        startGameLoop();
        generateObstacles();

    </script>
</body>
</html>
