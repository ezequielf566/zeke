<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=landscape">
    <title>Pescador de Milagres - Edi√ß√£o de Luxo</title>
    <style>
        :root {
            --sky: linear-gradient(to bottom, #1a2a3a, #f39c12);
            --gold: #f1c40f;
            --sea: linear-gradient(to bottom, #4fc3f7 0%, #0288d1 40%, #012b4d 100%);
        }

        /* RESET E ORIENTA√á√ÉO */
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            overflow: hidden; font-family: 'Georgia', serif;
            background: #000;
        }

        /* AVISO DE GIRAR TELA (Para Mobile) */
        @media screen and (orientation: portrait) {
            #rotate-warning { display: flex !important; }
        }

        #rotate-warning {
            position: fixed; inset: 0; background: #1a2a3a; color: white;
            display: none; flex-direction: column; align-items: center;
            justify-content: center; z-index: 9999; text-align: center; padding: 20px;
        }

        #game-canvas {
            width: 100vw; height: 100vh;
            position: relative; background: var(--sky);
            display: flex; flex-direction: column;
        }

        /* HUD */
        #hud {
            position: absolute; top: 15px; width: 100%;
            display: flex; justify-content: center; gap: 50px; z-index: 100;
            pointer-events: none;
        }
        .stat {
            background: rgba(0,0,0,0.6); border: 1px solid var(--gold);
            padding: 8px 25px; border-radius: 50px; color: white;
            backdrop-filter: blur(5px); font-weight: bold;
        }

        /* AMBIENTE */
        #sky-area { height: 30%; position: relative; overflow: hidden; }
        #sea-area { height: 70%; background: var(--sea); position: relative; overflow: hidden; }

        .sun-rays {
            position: absolute; inset: 0;
            background: repeating-conic-gradient(from 0deg at 50% -10%, transparent 0deg 15deg, rgba(255,255,255,0.08) 20deg 25deg);
            filter: blur(20px); pointer-events: none;
        }

        /* BARCO */
        #boat {
            position: absolute; bottom: -35px; left: 50%;
            width: 140px; transform: translateX(-50%);
            z-index: 50; animation: floatBoat 4s ease-in-out infinite;
        }
        @keyframes floatBoat {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(-2deg); }
            50% { transform: translateX(-50%) translateY(-5px) rotate(2deg); }
        }

        /* ANZOL E LINHA */
        #line {
            position: absolute; top: 30%; left: 50%;
            width: 2px; height: 0; background: rgba(255,255,255,0.5);
            transform-origin: top center; z-index: 40;
        }
        #hook { position: absolute; bottom: -20px; left: -12px; font-size: 25px; }

        /* PEIXES E LIXOS (ITENS) */
        .item {
            position: absolute; z-index: 30;
            transition: transform 0.1s;
            user-select: none; pointer-events: none;
            display: flex; align-items: center; justify-content: center;
        }

        /* ANIMA√á√ÉO DE FLUTUAR */
        @keyframes swim {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -15px); }
        }

        .overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            display: none; flex-direction: column; align-items: center;
            justify-content: center; color: white; z-index: 2000;
        }
    </style>
</head>
<body onclick="tentaLancar()">

    <div id="rotate-warning">
        <div style="font-size: 50px;">üîÑ</div>
        <h2>Por favor, gire o celular</h2>
        <p>Este jogo √© melhor aproveitado no modo deitado (paisagem).</p>
    </div>

    <div id="game-canvas">
        <div id="hud">
            <div class="stat">PONTOS: <span id="score" style="color:var(--gold)">0</span></div>
            <div class="stat">TEMPO: <span id="timer">60</span>s</div>
        </div>

        <div id="sky-area"></div>

        <div id="sea-area">
            <div class="sun-rays"></div>
            <div id="items-container"></div>
            
            <div id="boat">
                <svg viewBox="0 0 100 60">
                    <path d="M5,35 L95,35 L85,55 L15,55 Z" fill="#5d4037" />
                    <circle cx="45" cy="22" r="7" fill="#ffdbac" />
                    <line x1="52" y1="32" x2="95" y2="5" stroke="#222" stroke-width="3" />
                </svg>
            </div>
        </div>

        <div id="line">
            <div id="hook">ü™ù</div>
        </div>
    </div>

    <div id="game-over" class="overlay">
        <h1 style="color:var(--gold)">PESCARIA FINALIZADA</h1>
        <p id="result-text" style="font-size: 20px;"></p>
        <button onclick="location.reload()" style="padding: 15px 40px; border-radius: 50px; background:var(--gold); border:none; font-weight:bold; cursor:pointer;">JOGAR NOVAMENTE</button>
    </div>

<script>
    const itemsContainer = document.getElementById('items-container');
    const line = document.getElementById('line');
    const hook = document.getElementById('hook');
    const scoreText = document.getElementById('score');
    const timerText = document.getElementById('timer');

    let score = 0, timeLeft = 60, gameActive = true;
    let state = 'swing', angle = 0, dir = 1, len = 0;
    let currentCaught = null;

    const types = [
        { ico: 'üêü', pts: 10, w: 1, v: 0.02 }, 
        { ico: 'üê†', pts: 25, w: 0.8, v: 0.04 },
        { ico: 'üê°', pts: 40, w: 1.5, v: 0.015 },
        { ico: 'ü¶à', pts: 120, w: 4, v: 0.01 },
        { ico: 'üëû', pts: -5, w: 2.5, v: 0.005 }, // Lixo subtrai pontos
        { ico: 'ü•´', pts: -2, w: 1.2, v: 0.008 }  // Lixo
    ];

    let items = [];

    function createItems() {
        for(let i=0; i<15; i++) {
            const t = types[Math.floor(Math.random()*types.length)];
            const obj = {
                x: Math.random() * 90,
                y: Math.random() * 80,
                t: t,
                off: Math.random() * 100, // Offset para anima√ß√£o individual
                el: document.createElement('div')
            };
            obj.el.className = 'item';
            obj.el.innerHTML = t.ico;
            obj.el.style.fontSize = (25 + t.w * 10) + 'px';
            itemsContainer.appendChild(obj.el);
            items.push(obj);
        }
    }

    function tentaLancar() {
        if(state === 'swing' && gameActive) state = 'launch';
    }

    function loop() {
        if(!gameActive) return;

        // 1. Animar itens no mar (Flutua√ß√£o senoidal)
        const time = Date.now() * 0.002;
        items.forEach(it => {
            if(it === currentCaught) return;
            // Movimento de "nado" lateral e vertical
            const shiftX = Math.sin(time + it.off) * 20;
            const shiftY = Math.cos(time * 0.5 + it.off) * 10;
            it.el.style.left = `calc(${it.x}% + ${shiftX}px)`;
            it.el.style.top = `calc(${it.y}% + ${shiftY}px)`;
        });

        // 2. L√≥gica do Anzol
        if(state === 'swing') {
            angle += 1.8 * dir;
            if(Math.abs(angle) > 75) dir *= -1;
            line.style.transform = `rotate(${angle}deg)`;
        } 
        else if(state === 'launch') {
            len += 10;
            line.style.height = len + 'px';
            
            // Colis√£o
            const hRect = hook.getBoundingClientRect();
            items.forEach(it => {
                if(!currentCaught) {
                    const iRect = it.el.getBoundingClientRect();
                    if(hRect.left < iRect.right && hRect.right > iRect.left && hRect.top < iRect.bottom && hRect.bottom > iRect.top) {
                        currentCaught = it;
                        state = 'back';
                    }
                }
            });

            if(len > window.innerHeight) state = 'back';
        }
        else if(state === 'back') {
            let speed = 8;
            if(currentCaught) speed = Math.max(2, 8 / currentCaught.t.w);
            len -= speed;
            line.style.height = len + 'px';

            if(currentCaught) {
                currentCaught.el.style.top = '100%';
                currentCaught.el.style.left = '50%';
                currentCaught.el.style.transform = 'translate(-50%, -50%)';
                hook.appendChild(currentCaught.el);
            }

            if(len <= 0) {
                len = 0;
                state = 'swing';
                if(currentCaught) {
                    score += currentCaught.t.pts;
                    scoreText.innerText = score;
                    currentCaught.el.remove();
                    items = items.filter(i => i !== currentCaught);
                    currentCaught = null;
                    if(items.length < 8) createItems();
                }
            }
        }

        requestAnimationFrame(loop);
    }

    // Timer
    const clock = setInterval(() => {
        if(!gameActive) return;
        timeLeft--;
        timerText.innerText = timeLeft;
        if(timeLeft <= 0) {
            gameActive = false;
            document.getElementById('game-over').style.display = 'flex';
            document.getElementById('result-text').innerText = `Voc√™ salvou o rio e fez ${score} pontos!`;
        }
    }, 1000);

    createItems();
    loop();
</script>
</body>
</html>
